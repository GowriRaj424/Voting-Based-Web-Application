{% extends "base.html" %}

{% block title %}Login{% endblock %}

{% block content %}
<style>
  body {
    background-image: url("{{ url_for('static', filename='img/background.jpg') }}");
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    background-repeat: no-repeat;
  }

  .auth-form-wrap {
    min-height: 90vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .auth-form {
    background: rgba(255, 255, 255, 0.97);
    border-radius: 14px;
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    padding: 45px 40px;
    width: 100%;
    max-width: 420px;
  }

  .auth-form h1 {
    font-size: 2.2rem;
    font-weight: 600;
  }

  .auth-form p {
    color: #6c757d;
  }

  .form-control {
    border-radius: 8px;
  }

  .input-group-text {
    cursor: pointer;
    background: #f8f9fa;
  }

  .btn-primary {
    border-radius: 8px;
    padding: 10px;
    font-weight: 500;
  }
</style>

<div class="auth-form-wrap">
  <div class="auth-form">

    <h1 class="text-center mb-2">Welcome Back</h1>
    <p class="text-center mb-4">
      Sign in to continue to the voting system
    </p>

    <form action="{{ url_for('routes.login') }}" method="POST" autocomplete="off">

      <!-- CSRF Token -->
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <!-- SSN -->
      <div class="mb-3">
        <label for="ssn" class="form-label fw-semibold">
          Social Security Number
        </label>
        <input
          type="text"
          class="form-control"
          id="ssn"
          name="ssn"
          placeholder="XXX-XX-XXXX"
          required
          pattern="^\d{3}-\d{2}-\d{4}$"
          title="Format: XXX-XX-XXXX">
      </div>

      <!-- Password -->
      <div class="mb-4">
        <label for="password" class="form-label fw-semibold">
          Password
        </label>
        <div class="input-group">
          <input
            type="password"
            class="form-control"
            id="password"
            name="password"
            required
            minlength="8">

          <span class="input-group-text" onclick="togglePassword()">
            <i class="fa fa-eye-slash toggle-password"></i>
          </span>
        </div>
      </div>

      <!-- Submit -->
      <button type="submit" class="btn btn-primary w-100">
        Login
      </button>

      <p class="text-center mt-4 mb-0">
        Donâ€™t have an account?
        <a href="{{ url_for('routes.signup') }}">Sign Up</a>
      </p>

    </form>
  </div>
</div>

<script>
function togglePassword() {
  const field = document.getElementById("password");
  const icon = document.querySelector(".toggle-password");

  if (field.type === "password") {
    field.type = "text";
    icon.classList.replace("fa-eye-slash", "fa-eye");
  } else {
    field.type = "password";
    icon.classList.replace("fa-eye", "fa-eye-slash");
  }
}
</script>
{% endblock %}